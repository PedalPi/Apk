<ion-header>
  <ion-navbar>
    <ion-title>
      Configurations
    </ion-title>

    <ion-buttons end>
      <button ion-button color="royal" (click)="about()">
        About
      </button>
    </ion-buttons>
  </ion-navbar>

  <ion-list>
    <ion-item>
      <ion-label>Discover device mode</ion-label>

      <ion-note item-right [attr.selected]="!emulated && !autoSearch ? 'selected' : ''">Manual</ion-note>
      <ion-toggle [(ngModel)]="autoSearch" [disabled]="emulated"></ion-toggle>
      <ion-note item-right [attr.selected]="!emulated && autoSearch ? 'selected' : ''">Auto</ion-note>
    </ion-item>
  </ion-list>
</ion-header>

<ion-content>
  <div *ngIf="!autoSearch">
    <ion-item>
      <ion-label stacked primary>Device ip</ion-label>
      <ion-input placeholder="http://192.168.0.1" [(ngModel)]="ip"></ion-input>
      <button class="sameAddress" ion-button clear item-right large (click)="sameAddress()">Same address</button>
    </ion-item>

    <ion-item>
      <button ion-button full large (click)="apply()">Apply</button>
    </ion-item>
  </div>

  <div *ngIf="autoSearch" padding class="autoSearch">
    <div id="autosearch-title">
      <h2>Devices</h2>

      <ion-spinner [hidden]='!finding'></ion-spinner>
      <button ion-button (click)="startDiscover()" [hidden]="finding" color="dark" outline>
        discover
      </button>
    </div>

    <ion-list>
      <ion-item *ngFor="let device of devices" (click)="connect(device)">
        <sr-icon icon="icons.svg#icon-raspberry"></sr-icon> {{device.name}}
      </ion-item>
    </ion-list>
  </div>
</ion-content>
